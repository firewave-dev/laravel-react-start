import{r as i,j as s}from"./app-BByfSfuC.js";import{d as o,p as Pe,u as _e,a as O,C as R,i as xe,H as ye}from"./pick-calendar-levels-props-BQKo6yyP.js";import{f as we,z as ve,Z as Ie,H as I}from"./Title-ZeNDVGLn.js";import{b as Ye,a as h}from"./InputBase-3o6TqfvO.js";function be(a){if(a===null)return null;const u=new Date(a);return Number.isNaN(u.getTime())||!a?null:o(u).format("YYYY-MM-DD")}function je({date:a,maxDate:u,minDate:d}){return!(a==null||Number.isNaN(new Date(a).getTime())||u&&o(a).isAfter(u,"date")||d&&o(a).isBefore(d,"date"))}const Me={valueFormat:"MMMM D, YYYY",fixOnBlur:!0,size:"sm"},E=we((a,u)=>{const d=Ye("DateInput",Me,a),{inputProps:Y,wrapperProps:b,value:f,defaultValue:j,onChange:T,clearable:P,clearButtonProps:z,popoverProps:H,getDayProps:M,locale:D,valueFormat:N,dateParser:K,minDate:S,maxDate:k,fixOnBlur:L,onFocus:U,onBlur:A,onClick:W,onKeyDown:Z,readOnly:m,name:q,form:G,rightSection:J,unstyled:_,classNames:Q,styles:X,allowDeselect:x,date:$,defaultDate:ee,onDateChange:te,getMonthControlProps:ae,getYearControlProps:se,disabled:y,...oe}=d,B=i.useRef(null),F=i.useRef(null),[V,n]=i.useState(!1),{calendarProps:ne,others:re}=Pe(oe),w=_e(),le=K||(e=>{const r=o(e,N,w.getLocale(D)).toDate();return Number.isNaN(r.getTime())?be(e):o(r).format("YYYY-MM-DD")}),ue=x!==void 0?x:P,p=e=>e?o(e).locale(w.getLocale(D)).format(N):"",[t,g,C]=O({type:"default",value:f,defaultValue:j,onChange:T}),[ce,v]=O({type:"default",value:$,defaultValue:j||ee,onChange:te});i.useEffect(()=>{C&&f!==null&&v(f)},[C,f]);const[ie,c]=i.useState(p(t));i.useEffect(()=>{c(p(t))},[w.getLocale(D)]);const pe=e=>{const r=e.currentTarget.value;if(c(r),n(!0),r.trim()===""&&(x||P))g(null);else{const l=le(r);l&&je({date:l,minDate:S,maxDate:k})&&(g(l),v(l))}},de=e=>{A?.(e),n(!1),L&&c(p(t))},fe=e=>{U?.(e),n(!0)},De=e=>{W?.(e),n(!0)},me=e=>{e.key==="Escape"&&n(!1),Z?.(e)},ge=e=>({...M?.(e),selected:o(t).isSame(e,"day"),onClick:r=>{M?.(e).onClick?.(r);const l=ue&&o(t).isSame(e,"day")?null:e;g(l),!C&&l&&c(p(l)),n(!1)}}),Ce=s.jsx(h.ClearButton,{onClick:()=>{g(null),!C&&c(""),n(!1)},unstyled:_,...z}),he=P&&!!t&&!m&&!y;return ve(()=>{t!==void 0&&!V&&c(p(t))},[t]),Ie(()=>n(!1),void 0,[B.current,F.current]),s.jsxs(s.Fragment,{children:[s.jsx(h.Wrapper,{...b,__staticSelector:"DateInput",ref:B,children:s.jsxs(I,{opened:V,trapFocus:!1,position:"bottom-start",disabled:m||y,withRoles:!1,unstyled:_,...H,children:[s.jsx(I.Target,{children:s.jsx(h,{"data-dates-input":!0,"data-read-only":m||void 0,autoComplete:"off",ref:u,value:ie,onChange:pe,onBlur:de,onFocus:fe,onClick:De,onKeyDown:me,readOnly:m,rightSection:J,__clearSection:Ce,__clearable:he,...Y,...re,disabled:y,__staticSelector:"DateInput"})}),s.jsx(I.Dropdown,{onMouseDown:e=>e.preventDefault(),"data-dates-dropdown":!0,ref:F,children:s.jsx(R,{__staticSelector:"DateInput",...ne,classNames:Q,styles:X,unstyled:_,__preventFocus:!0,minDate:S,maxDate:k,locale:D,getDayProps:ge,size:Y.size,date:ce,onDateChange:v,getMonthControlProps:e=>({selected:typeof t=="string"?xe(e,t):!1,...ae?.(e)}),getYearControlProps:e=>({selected:typeof t=="string"?o(e).isSame(t,"year"):!1,...se?.(e)}),attributes:b.attributes})})]})}),s.jsx(ye,{name:q,form:G,value:t,type:"default"})]})});E.classes={...h.classes,...R.classes};E.displayName="@mantine/dates/DateInput";export{E as D};
