import{b as te,u as le,r as m,j as e,L as E,a as ie}from"./app-BByfSfuC.js";import{F as ne}from"./FrontLayout-C85N90XF.js";import{f as u}from"./dateUtils-trGW1CLt.js";import{B as oe,C as ce,T as p,P as N,G as r,b as M,a as t,S as y}from"./Title-ZeNDVGLn.js";import{G as d}from"./Grid-CjStMlwy.js";import{T as de}from"./TextInput-11NqqKSk.js";import{S as w}from"./search-phtwuYDS.js";import{S as v}from"./Select-D5leAiB_.js";import{M as xe}from"./MultiSelect-29DeKErl.js";import{D as G}from"./DateInput-CKykDCiQ.js";import{T as x}from"./Tabs-D40K0kRs.js";import{C as g}from"./Card-D-EKUExk.js";import{F as I}from"./file-text-BMFZVyOb.js";import{B as h}from"./Badge-Aqzdn07U.js";import{U as f}from"./user-D_i7W3jX.js";import{c as me}from"./createLucideIcon-BT_P5zGE.js";import{C as U}from"./calendar-DcJcnZgA.js";import{C as W}from"./clock-NtvrZsXo.js";import{M as $}from"./map-pin-Cym1FHsQ.js";import{B as H}from"./bell-pBXD-JBQ.js";import{A as he}from"./Alert-D9htil08.js";/* empty css            */import"./Burger-C6E3aGFj.js";import"./Divider-DfaJXAuO.js";import"./get-sorted-breakpoints-DFaYOGKe.js";import"./get-base-value-JqT_q0U7.js";import"./InputBase-3o6TqfvO.js";import"./CloseButton-DeOFDxF2.js";import"./CheckIcon-B0KHLKib.js";import"./ScrollArea-BFZt3DNW.js";import"./pick-calendar-levels-props-BQKo6yyP.js";import"./clamp-DTmYCdls.js";import"./get-auto-contrast-value-Da6zqqWm.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Q=me("Tag",pe),i=(c,j,l="en")=>{if(!c)return"";if(c.translations&&c.translations.length>0){const o=c.translations.find(P=>P.locale===l);if(o&&o[j])return o[j]}return c[j]||""},qe=({query:c,language:j,results:l,filters:o})=>{const{url:P}=te(),{t:a}=le(),[b,K]=m.useState(c||""),[C,O]=m.useState(j||"en"),[n,V]=m.useState(o.contentTypes||["posts","events","bulletins"]),[z,q]=m.useState(o.dateFrom||null),[S,J]=m.useState(o.dateTo||null),[T,X]=m.useState(o.category||""),[D,Y]=m.useState(o.eventType||""),[F,Z]=m.useState(o.priority||""),[k,ue]=m.useState(o.status||"published"),ee=[{value:"posts",label:a("postsLabel")},{value:"events",label:a("eventsLabel")},{value:"bulletins",label:a("bulletinsLabel")}],se=[{value:"news",label:a("newsCategory")},{value:"announcements",label:a("announcementsCategory")},{value:"spiritual",label:a("spiritualCategory")},{value:"community",label:a("communityCategory")}],ae=[{value:"liturgy",label:a("liturgyType")},{value:"feast",label:a("feastType")},{value:"meeting",label:a("meetingType")},{value:"social",label:a("socialType")}],re=[{value:"low",label:a("lowPriority")},{value:"normal",label:a("normalPriority")},{value:"high",label:a("highPriority")},{value:"urgent",label:a("urgentPriority")}],_=()=>{const s=new URLSearchParams;b&&s.set("q",b),C&&s.set("lang",C),n.length&&s.set("types",n.join(",")),z&&s.set("date_from",z),S&&s.set("date_to",S),T&&s.set("category",T),D&&s.set("event_type",D),F&&s.set("priority",F),k&&s.set("status",k),ie.visit(`/search?${s.toString()}`,{preserveScroll:!0,preserveState:!0})},R=s=>{switch(s){case"urgent":return"red";case"high":return"orange";case"normal":return"blue";case"low":return"gray";default:return"gray"}},L=s=>{switch(s){case"liturgy":return"gold";case"feast":return"violet";case"meeting":return"blue";case"social":return"green";default:return"gray"}},A=s=>{switch(s){case"news":return"blue";case"announcements":return"orange";case"spiritual":return"violet";case"community":return"green";default:return"gray"}},B=(l.posts?.data?.length||0)+(l.events?.data?.length||0)+(l.bulletins?.data?.length||0);return e.jsx(ne,{children:e.jsx(oe,{style:{minHeight:"100vh",background:"linear-gradient(135deg, #F5F5DC 0%, #F0E68C 30%, #DDD1A0 70%, #D2B48C 100%)",padding:"2rem 0"},children:e.jsxs(ce,{size:"xl",children:[e.jsx(p,{order:1,mb:"lg",style:{color:"#8B4513",textAlign:"center",fontSize:"2.5rem",fontWeight:"700",textShadow:"2px 2px 4px rgba(139, 69, 19, 0.3)"},children:a("searchOurContent")}),e.jsx(N,{p:"lg",mb:"xl",style:{background:"linear-gradient(135deg, #F5F5DC 0%, #F0E68C 30%, #DDD1A0 70%, #D2B48C 100%)",border:"2px solid #8B4513",borderRadius:"16px",boxShadow:"0 8px 32px rgba(139, 69, 19, 0.3)"},children:e.jsxs(d,{children:[e.jsxs(d.Col,{span:12,children:[e.jsx(de,{placeholder:a("searchPlaceholder"),value:b,onChange:s=>K(s.target.value),onKeyPress:s=>s.key==="Enter"&&_(),leftSection:e.jsx(w,{size:20}),size:"lg",styles:{input:{fontSize:"16px",padding:"12px 16px",backgroundColor:"#FFF8DC",border:"2px solid #D2B48C",color:"#8B4513","&:focus":{borderColor:"#8B4513",boxShadow:"0 0 0 1px #8B4513"},"&::placeholder":{color:"rgba(139, 69, 19, 0.6)"}}}}),e.jsx(r,{justify:"center",mt:"md",children:e.jsx(M,{onClick:_,size:"lg",disabled:!b.trim(),leftSection:e.jsx(w,{size:18}),style:{background:"#8B4513",color:"#FFFFFF",border:"none",padding:"12px 32px",fontSize:"16px",fontWeight:"600","&:hover":{background:"#A0522D"},"&:disabled":{background:"#D2B48C",color:"#8B4513"}},children:a("search")})})]}),e.jsx(d.Col,{span:{base:12,sm:6,md:3},children:e.jsx(v,{label:a("language"),value:C,onChange:O,data:[{value:"en",label:a("english")},{value:"fr",label:a("french")},{value:"sr",label:a("serbian")}]})}),e.jsx(d.Col,{span:{base:12,sm:6,md:3},children:e.jsx(xe,{label:a("contentTypes"),value:n,onChange:V,data:ee,placeholder:a("selectTypes")})}),e.jsx(d.Col,{span:{base:12,sm:6,md:3},children:e.jsx(G,{label:a("fromDate"),value:z,onChange:q,placeholder:a("startDate")})}),e.jsx(d.Col,{span:{base:12,sm:6,md:3},children:e.jsx(G,{label:a("toDate"),value:S,onChange:J,placeholder:a("endDate")})}),n.includes("posts")&&e.jsx(d.Col,{span:{base:12,sm:6,md:3},children:e.jsx(v,{label:a("categoryPosts"),value:T,onChange:X,data:se,placeholder:a("allCategories"),clearable:!0})}),n.includes("events")&&e.jsx(d.Col,{span:{base:12,sm:6,md:3},children:e.jsx(v,{label:a("eventType"),value:D,onChange:Y,data:ae,placeholder:a("allTypes"),clearable:!0})}),n.includes("bulletins")&&e.jsx(d.Col,{span:{base:12,sm:6,md:3},children:e.jsx(v,{label:a("priorityBulletins"),value:F,onChange:Z,data:re,placeholder:a("allPriorities"),clearable:!0})}),e.jsx(d.Col,{span:12,children:e.jsxs(M,{onClick:_,size:"md",children:[e.jsx(w,{size:16,style:{marginRight:8}}),a("search")]})})]})}),c&&e.jsx(N,{p:"lg",mb:"xl",style:{background:"linear-gradient(135deg, #F5F5DC 0%, #F0E68C 30%, #DDD1A0 70%, #D2B48C 100%)",border:"2px solid #8B4513",borderRadius:"12px",boxShadow:"0 4px 16px rgba(139, 69, 19, 0.2)"},children:e.jsx(t,{size:"xl",style:{color:"#8B4513",fontWeight:"600",textAlign:"center"},children:a("foundResults").replace("{count}",B).replace("{query}",c)})}),B>0?e.jsxs(x,{defaultValue:"all",className:"search-results",children:[e.jsxs(x.List,{children:[e.jsxs(x.Tab,{value:"all",children:[a("allResults")," (",B,")"]}),n.includes("posts")&&e.jsxs(x.Tab,{value:"posts",children:[a("postsResults")," (",l.posts?.data?.length||0,")"]}),n.includes("events")&&e.jsxs(x.Tab,{value:"events",children:[a("eventsResults")," (",l.events?.data?.length||0,")"]}),n.includes("bulletins")&&e.jsxs(x.Tab,{value:"bulletins",children:[a("bulletinsResults")," (",l.bulletins?.data?.length||0,")"]})]}),e.jsx(x.Panel,{value:"all",pt:"md",children:e.jsxs(y,{gap:"md",children:[l.posts?.data?.map(s=>e.jsxs(g,{p:"md",className:"search-result-card",children:[e.jsxs(r,{mb:"xs",children:[e.jsx(I,{size:16}),e.jsx(h,{color:A(s.category),variant:"light",children:s.category}),e.jsx(t,{size:"sm",c:"dimmed",children:u(s.published_at||s.created_at)})]}),e.jsx(p,{order:3,mb:"xs",children:e.jsx(E,{href:`/blog/${s.slug}`,children:i(s,"title")})}),s.excerpt&&e.jsx(t,{mb:"sm",children:i(s,"excerpt")}),e.jsxs(r,{children:[e.jsxs(r,{gap:"xs",children:[e.jsx(f,{size:14}),e.jsx(t,{size:"sm",children:s.author?.name})]}),e.jsxs(r,{gap:"xs",children:[e.jsx(Q,{size:14}),e.jsxs(t,{size:"sm",children:[s.views_count," views"]})]})]})]},s.id)),l.events?.data?.map(s=>e.jsxs(g,{p:"md",className:"search-result-card",children:[e.jsxs(r,{mb:"xs",children:[e.jsx(U,{size:16}),e.jsx(h,{color:L(s.event_type),variant:"light",children:s.event_type}),e.jsx(t,{size:"sm",c:"dimmed",children:u(s.event_date)})]}),e.jsx(p,{order:3,mb:"xs",children:i(s,"title")}),s.description&&e.jsx(t,{mb:"sm",children:i(s,"description")}),e.jsxs(r,{children:[s.start_time&&e.jsxs(r,{gap:"xs",children:[e.jsx(W,{size:14}),e.jsx(t,{size:"sm",children:s.start_time})]}),s.location&&e.jsxs(r,{gap:"xs",children:[e.jsx($,{size:14}),e.jsx(t,{size:"sm",children:i(s,"location")})]})]})]},s.id)),l.bulletins?.data?.map(s=>e.jsxs(g,{p:"md",className:"search-result-card",children:[e.jsxs(r,{mb:"xs",children:[e.jsx(H,{size:16}),e.jsx(h,{color:R(s.priority),variant:"light",children:s.priority}),e.jsx(t,{size:"sm",c:"dimmed",children:u(s.created_at)})]}),e.jsx(p,{order:3,mb:"xs",children:i(s,"title")}),e.jsx(t,{mb:"sm",children:i(s,"message")}),e.jsxs(r,{children:[e.jsxs(r,{gap:"xs",children:[e.jsx(f,{size:14}),e.jsx(t,{size:"sm",children:s.poster?.name})]}),e.jsx(h,{size:"sm",variant:"outline",children:s.type})]})]},s.id))]})}),n.includes("posts")&&e.jsx(x.Panel,{value:"posts",pt:"md",children:e.jsx(y,{gap:"md",children:l.posts?.data?.map(s=>e.jsxs(g,{p:"md",className:"search-result-card",children:[e.jsxs(r,{mb:"xs",children:[e.jsx(I,{size:16}),e.jsx(h,{color:A(s.category),variant:"light",children:s.category}),e.jsx(t,{size:"sm",c:"dimmed",children:u(s.published_at||s.created_at)})]}),e.jsx(p,{order:3,mb:"xs",children:e.jsx(E,{href:`/blog/${s.slug}`,children:i(s,"title")})}),s.excerpt&&e.jsx(t,{mb:"sm",children:i(s,"excerpt")}),e.jsxs(r,{children:[e.jsxs(r,{gap:"xs",children:[e.jsx(f,{size:14}),e.jsx(t,{size:"sm",children:s.author?.name})]}),e.jsxs(r,{gap:"xs",children:[e.jsx(Q,{size:14}),e.jsxs(t,{size:"sm",children:[s.views_count," views"]})]})]})]},s.id))})}),n.includes("events")&&e.jsx(x.Panel,{value:"events",pt:"md",children:e.jsx(y,{gap:"md",children:l.events?.data?.map(s=>e.jsxs(g,{p:"md",className:"search-result-card",children:[e.jsxs(r,{mb:"xs",children:[e.jsx(U,{size:16}),e.jsx(h,{color:L(s.event_type),variant:"light",children:s.event_type}),e.jsx(t,{size:"sm",c:"dimmed",children:u(s.event_date)})]}),e.jsx(p,{order:3,mb:"xs",children:i(s,"title")}),s.description&&e.jsx(t,{mb:"sm",children:i(s,"description")}),e.jsxs(r,{children:[s.start_time&&e.jsxs(r,{gap:"xs",children:[e.jsx(W,{size:14}),e.jsx(t,{size:"sm",children:s.start_time})]}),s.location&&e.jsxs(r,{gap:"xs",children:[e.jsx($,{size:14}),e.jsx(t,{size:"sm",children:i(s,"location")})]})]})]},s.id))})}),n.includes("bulletins")&&e.jsx(x.Panel,{value:"bulletins",pt:"md",children:e.jsx(y,{gap:"md",children:l.bulletins?.data?.map(s=>e.jsxs(g,{p:"md",className:"search-result-card",children:[e.jsxs(r,{mb:"xs",children:[e.jsx(H,{size:16}),e.jsx(h,{color:R(s.priority),variant:"light",children:s.priority}),e.jsx(t,{size:"sm",c:"dimmed",children:u(s.created_at)})]}),e.jsx(p,{order:3,mb:"xs",children:i(s,"title")}),e.jsx(t,{mb:"sm",children:i(s,"message")}),e.jsxs(r,{children:[e.jsxs(r,{gap:"xs",children:[e.jsx(f,{size:14}),e.jsx(t,{size:"sm",children:s.poster?.name})]}),e.jsx(h,{size:"sm",variant:"outline",children:s.type})]})]},s.id))})})]}):c?e.jsx(he,{title:a("noResultsFound"),color:"yellow",children:a("tryAdjustingSearch")}):null]})})})};export{qe as default};
